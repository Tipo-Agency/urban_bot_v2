# Telegram Bot —Å —Å–∏—Å—Ç–µ–º–æ–π –æ–ø–ª–∞—Ç—ã —á–µ—Ä–µ–∑ CloudPayments

Telegram –±–æ—Ç –¥–ª—è —Ñ–∏—Ç–Ω–µ—Å-–∫–ª—É–±–∞ —Å –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–æ–∫ —á–µ—Ä–µ–∑ CloudPayments.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- ü§ñ Telegram –±–æ—Ç –Ω–∞ aiogram 3.x
- üí≥ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å CloudPayments –¥–ª—è –ø—Ä–∏–µ–º–∞ –ø–ª–∞—Ç–µ–∂–µ–π
- üîÑ –†–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ)
- üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –æ–ø–ª–∞—Ç—ã
- üì± FSM (Finite State Machine) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üè† –£–¥–æ–±–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
git clone <repository>
cd tg_bot
pip install -r requirements.txt
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏:

```env
# Telegram Bot Token –æ—Ç @BotFather
BOT_TOKEN=your_bot_token_here

# OpenRouter API –∫–ª—é—á –¥–ª—è GPT (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
OPENROUTER_API_KEY=your_openrouter_key_here

# –ë–∞–∑–æ–≤—ã–π URL –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (–±–µ–∑ trailing slash)
BASE_URL=https://yourdomain.com

# Public ID –æ—Ç CloudPayments
CLOUDPAYMENTS_PUBLIC_ID=your_cloudpayments_public_id

# –ü–æ—Ä—Ç –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 3000)
PORT=3000
```

### 3. –ü–æ–ª—É—á–µ–Ω–∏–µ CloudPayments –∫–ª—é—á–µ–π

1. –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ—Å—å –Ω–∞ [CloudPayments](https://cloudpayments.ru/)
2. –ü–æ–ª—É—á–∏—Ç–µ Public ID –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ webhook –Ω–∞ URL: `https://yourdomain.com/api/cloudpayments/webhook`

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –¥–ª—è –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ `handlers/subscriptions.py` –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `cancel_subscription_handler`:

```python
cancel_text = """
‚ùå <b>–û—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏</b>

–î–ª—è –æ—Ç–º–µ–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏ —Å–≤—è–∂–∏—Ç–µ—Å—å —Å –º–µ–Ω–µ–¥–∂–µ—Ä–æ–º –∫–ª—É–±–∞:
üìû –¢–µ–ª–µ—Ñ–æ–Ω: +7 (xxx) xxx-xx-xx  # <- –£–∫–∞–∂–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä
üí¨ Telegram: @manager_username    # <- –£–∫–∞–∂–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π username

–õ–∏–±–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ –æ—Ç–¥–µ–ª –ø—Ä–æ–¥–∞–∂ –ø—Ä–∏ –ø–æ—Å–µ—â–µ–Ω–∏–∏ –∫–ª—É–±–∞.
"""
```

## –ó–∞–ø—É—Å–∫

### –û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–± (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
python run.py
```

### –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã

–¢–æ–ª—å–∫–æ –±–æ—Ç:
```bash
python bot.py
```

–¢–æ–ª—å–∫–æ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä:
```bash
python web_server.py
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
tg_bot/
‚îú‚îÄ‚îÄ bot.py                 # –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îú‚îÄ‚îÄ run.py                 # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –∑–∞–ø—É—Å–∫–∞
‚îú‚îÄ‚îÄ web_server.py          # FastAPI –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ db.py                  # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ messages.py            # –¢–µ–∫—Å—Ç–æ–≤—ã–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îú‚îÄ‚îÄ keyboards.py           # –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã –±–æ—Ç–∞
‚îú‚îÄ‚îÄ handlers/              # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ start.py          # –ö–æ–º–∞–Ω–¥–∞ /start
‚îÇ   ‚îú‚îÄ‚îÄ subscriptions.py  # –õ–æ–≥–∏–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫
‚îÇ   ‚îî‚îÄ‚îÄ support.py        # –ü–æ–¥–¥–µ—Ä–∂–∫–∞
‚îú‚îÄ‚îÄ public/payment/        # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–ø–ª–∞—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ index.html
‚îÇ   ‚îú‚îÄ‚îÄ script.js
‚îÇ   ‚îî‚îÄ‚îÄ style.css
‚îî‚îÄ‚îÄ users.db              # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## API Endpoints

- `GET /api/ping` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- `GET /api/user?id={user_id}` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- `POST /api/success` - –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç—ã
- `POST /api/cloudpayments/webhook` - Webhook –æ—Ç CloudPayments
- `GET /payment?token={user_id}` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã

## –¢–∞—Ä–∏—Ñ—ã –ø–æ–¥–ø–∏—Å–æ–∫

1. **SmartFit** - 1300 ‚ÇΩ/–º–µ—Å (–¥–æ—Å—Ç—É–ø: 07:00‚Äì17:30, 20:30‚Äì23:30)
2. **FitFlow** - 1700 ‚ÇΩ/–º–µ—Å (–±–µ–∑–ª–∏–º–∏—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø)
3. **ProFit** - 2400 ‚ÇΩ/–º–µ—Å (–±–µ–∑–ª–∏–º–∏—Ç + –≥—Ä—É–ø–ø–æ–≤—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã)

–í—Å—Ç—É–ø–∏—Ç–µ–ª—å–Ω—ã–π –≤–∑–Ω–æ—Å: 3000 ‚ÇΩ (–æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ)

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –±–æ—Ç–∞

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- üë§ **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç** - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, —Ç–µ–∫—É—â–µ–π –ø–æ–¥–ø–∏—Å–∫–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- üí≥ **–ü–æ–¥–ø–∏—Å–∫–∏** - –≤—ã–±–æ—Ä –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤  
- ‚ùì **–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å** - —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞ —á–µ—Ä–µ–∑ GPT

### –ù–∞–≤–∏–≥–∞—Ü–∏—è
–í–æ –≤—Å–µ—Ö —Ä–∞–∑–¥–µ–ª–∞—Ö –±–æ—Ç–∞ –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∏ –¥–ª—è —É–¥–æ–±–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏:
- üè† **"–í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"** - –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ –ª—é–±–æ–≥–æ —Ä–∞–∑–¥–µ–ª–∞
- ‚ùå **"–û—Ç–º–µ–Ω–∞"** - –æ—Ç–º–µ–Ω–∞ —Ç–µ–∫—É—â–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –∏ –≤–æ–∑–≤—Ä–∞—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- ‚ùå **"–ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–∏–∞–ª–æ–≥"** - –≤—ã—Ö–æ–¥ –∏–∑ —Ä–µ–∂–∏–º–∞ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (–§–ò–û, —Ç–µ–ª–µ—Ñ–æ–Ω)
- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º —Ç–∞—Ä–∏—Ñ–µ
- –û—Ç–º–µ–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏ (—á–µ—Ä–µ–∑ –º–µ–Ω–µ–¥–∂–µ—Ä–∞) - **–∏–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∏**
- –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–∞—Ä–∏—Ñ–∞ - **–∏–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∏**
- –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é - **–∏–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∞**

### –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞
- –î–∏–∞–ª–æ–≥ —Å GPT-–ø–æ–º–æ—â–Ω–∏–∫–æ–º
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–æ–º —á–µ—Ä–µ–∑ **–æ–±—ã—á–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã**:
  - ‚ùå **"–ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–∏–∞–ª–æ–≥"** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ GPT-—Å–µ—Å—Å–∏–∏
  - üè† **"–í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"** - –≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é —Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –¥–∏–∞–ª–æ–≥–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ö–Ω–æ–ø–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ GPT

### –ü—Ä–æ—Ü–µ—Å—Å –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
- –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ —á–µ—Ä–µ–∑ **–æ–±—ã—á–Ω—ã–µ –∫–Ω–æ–ø–∫–∏**
- –í–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö —Å –∫–Ω–æ–ø–∫–∞–º–∏ –æ—Ç–º–µ–Ω—ã - **–∏–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∏**
- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –æ–ø–ª–∞—Ç—ã —Å –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π - **–∏–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∏**

## –ü—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Ä–∞–∑–¥–µ–ª "–ü–æ–¥–ø–∏—Å–∫–∏"
2. –í—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–π —Ç–∞—Ä–∏—Ñ
3. –í–≤–æ–¥–∏—Ç –§–ò–û –∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ (–ø—Ä–∏ –ø–µ—Ä–≤–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏)
4. –ü–æ–ª—É—á–∞–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –æ–ø–ª–∞—Ç—É
5. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü—É CloudPayments
6. –°–æ–≤–µ—Ä—à–∞–µ—Ç –æ–ø–ª–∞—Ç—É
7. –ü–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ –≤ –±–æ—Ç–µ

**–í –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ—Ü–µ—Å—Å–∞ –º–æ–∂–Ω–æ:**
- –û—Ç–º–µ–Ω–∏—Ç—å –¥–µ–π—Å—Ç–≤–∏–µ –∫–Ω–æ–ø–∫–æ–π "‚ùå –û—Ç–º–µ–Ω–∞"
- –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∫–Ω–æ–ø–∫–æ–π "üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
- –í—ã–±—Ä–∞—Ç—å –¥—Ä—É–≥–æ–π —Ç–∞—Ä–∏—Ñ

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∞—Ä–∏—Ñ–æ–≤

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Å–ø–∏—Å–æ–∫ `SUBSCRIPTION_VARIANTS` –≤ `messages.py`:

```python
SUBSCRIPTION_VARIANTS = [
    {
        "id": 4,
        "title": "–ù–æ–≤—ã–π —Ç–∞—Ä–∏—Ñ",
        "description": "–û–ø–∏—Å–∞–Ω–∏–µ ‚Äî —Ü–µ–Ω–∞ ‚ÇΩ/–º–µ—Å",
        "price": —Ü–µ–Ω–∞,
    },
]
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã `users`:

- `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `chat_id` - Telegram chat ID
- `fio` - –§–ò–û –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `phone` - –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
- `status` - —Å—Ç–∞—Ç—É—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `sub_type` - —Ç–∏–ø –ø–æ–¥–ø–∏—Å–∫–∏
- `sub_id` - ID –ø–æ–¥–ø–∏—Å–∫–∏ –≤ CloudPayments

### –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

**–û–±—ã—á–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã (ReplyKeyboard):**
- `main_menu()` –≤ `keyboards.py` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
- `get_subscription_keyboard()` –≤ `handlers/subscriptions.py` - –≤—ã–±–æ—Ä –ø–æ–¥–ø–∏—Å–æ–∫
- `get_support_keyboard()` –≤ `handlers/support.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π

**–ò–Ω–ª–∞–π–Ω –∫–Ω–æ–ø–∫–∏ (InlineKeyboard):**
- `get_payment_keyboard()` - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –æ–ø–ª–∞—Ç—ã  
- `get_profile_keyboard()` - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

–í `handlers/support.py` —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤:
```python
# –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é" –∏–∑ —Ä–µ–∂–∏–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
if message.text == "üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é":
    active_gpt_users.discard(user_id)  # –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ä–µ–∂–∏–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
    return  # –ü–µ—Ä–µ–¥–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –≤ handlers/subscriptions.py
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã–π CloudPayments
- –¢–æ–∫–µ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é UUID
- –í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–æ–º–µ—Ä–æ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–ø–∞–º–∞ –≤ —Ä–µ–∂–∏–º–µ —Ç–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∏

## –¢–µ—Ö–ø–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GPT —á–µ—Ä–µ–∑ OpenRouter API. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç:

- –ó–∞–¥–∞–≤–∞—Ç—å –≤–æ–ø—Ä–æ—Å—ã –≤ —Å–≤–æ–±–æ–¥–Ω–æ–π —Ñ–æ—Ä–º–µ
- –ü–æ–ª—É—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã –æ—Ç AI-–ø–æ–º–æ—â–Ω–∏–∫–∞
- –ó–∞–≤–µ—Ä—à–∞—Ç—å –¥–∏–∞–ª–æ–≥ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "‚ùå –ó–∞–≤–µ—Ä—à–∏—Ç—å –¥–∏–∞–ª–æ–≥"
- –í–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "üè† –í –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é"
- –ö–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ **–æ–±—ã—á–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã** –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è 